{"version":3,"sources":["js/03-feedback.js"],"names":["refs","form","document","querySelector","email","textarea","addEventListener","onFormSubmit","onTextareaInput","STORAGE_KEY","feedbackFormState","getObj","e","preventDefault","target","reset","localStorage","removeItem","value","key","attributes","name","setItem","JSON","stringify","populateTextarea","savedObj","message","localStorageKey","savedMessage","getItem","parse"],"mappings":";AAAA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,kBAC7BC,MAAOF,SAASC,cAAc,wBAC9BE,SAAUH,SAASC,cAAc,4BAGnCH,EAAKC,KAAKK,iBAAiB,SAAUC,GACrCP,EAAKI,MAAME,iBAAiB,QAASE,GACrCR,EAAKK,SAASC,iBAAiB,QAASE,GAExC,MAAMC,EAAc,sBAGdC,EAAoB,IAAKC,EAAOF,IAKtC,SAASF,EAAaK,GACpBA,EAAEC,iBACFD,EAAEE,OAAOC,QACTC,aAAaC,WAAWR,GAG1B,SAASD,EAAgBI,GACjBM,MAAAA,EAAQN,EAAEE,OAAOI,MACjBC,EAAMP,EAAEE,OAAOM,WAAWC,KAAKH,MAErCR,EAAkBS,GAAOD,EAEzBF,aAAaM,QAAQb,EAAac,KAAKC,UAAUd,IAGnD,SAASe,IACDC,MAAAA,EAAWf,EAAOF,GAEpBiB,IACEA,EAAStB,QACXJ,EAAKI,MAAMc,MAAQQ,EAAStB,OAE1BsB,EAASC,UACX3B,EAAKK,SAASa,MAAQQ,EAASC,UAMrC,SAAShB,EAAOiB,GACRC,MAAAA,EAAeb,aAAac,QAAQF,GAGnCF,OAFUH,KAAKQ,MAAMF,GAjC9BJ","file":"03-feedback.2c458b98.js","sourceRoot":"../src","sourcesContent":["const refs = {\n  form: document.querySelector('.feedback-form'),\n  email: document.querySelector('.feedback-form input'),\n  textarea: document.querySelector('.feedback-form textarea'),\n};\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.email.addEventListener('input', onTextareaInput);\nrefs.textarea.addEventListener('input', onTextareaInput);\n\nconst STORAGE_KEY = 'feedback-form-state';\n\n// Распыляю объект из localStorage или пусто\nconst feedbackFormState = { ...getObj(STORAGE_KEY) };\n\n// Если что-то есть в localStorage --> заполняю форму\npopulateTextarea();\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  e.target.reset();\n  localStorage.removeItem(STORAGE_KEY);\n}\n\nfunction onTextareaInput(e) {\n  const value = e.target.value;\n  const key = e.target.attributes.name.value;\n\n  feedbackFormState[key] = value;\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(feedbackFormState));\n}\n\nfunction populateTextarea() {\n  const savedObj = getObj(STORAGE_KEY);\n\n  if (savedObj) {\n    if (savedObj.email) {\n      refs.email.value = savedObj.email;\n    }\n    if (savedObj.message) {\n      refs.textarea.value = savedObj.message;\n    }\n  }\n}\n\n// Парсит объект из localStorage\nfunction getObj(localStorageKey) {\n  const savedMessage = localStorage.getItem(localStorageKey);\n  const savedObj = JSON.parse(savedMessage);\n\n  return savedObj;\n}\n"]}